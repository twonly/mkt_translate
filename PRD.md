# AI翻译 Web 工具 PRD

## 产品概览
- Web 端 AI 翻译工具，调用 DeepSeek LLM 完成翻译、评估与历史记录管理；服务典型用户如跨境电商运营、内容团队、自由译者。
- 模块：输入/模型配置、翻译结果区、Prompt 调节、翻译质量评估、历史记录。

## 用户流程
1. **进入**：查看默认目标语言、默认模型与默认 Prompt；可在设置中修改常用语言。
2. **输入**：粘贴原文，选择目标语言、DeepSeek 模型（如 `deepseek-chat`、`deepseek-translate`），必要时指定领域标签。
3. **Prompt 调节**：加载默认 Prompt；支持轻量编辑（增加术语表、语气要求等）；提供“重置”。
4. **翻译**：点击“翻译”后展示调用状态→输出译文→显示 token 与时间消耗；原文与译文支持分段对齐、术语高亮。
5. **评估**：点“评估翻译”，由 LLM 对比原/译文给出多个维度评分和改进建议；支持将评估结论保存。
6. **历史记录**：自动保存翻译任务，列表支持搜索、筛选、重用译文/Prompt；可导出为 JSON 或 CSV。

## 核心功能设计
- **翻译设置**：目标语言列表、翻译领域选项（市场营销、技术文档等）、模型选择、温度/TopP 可选、强制术语表上传（CSV 或文本）。
- **Prompt 模板**：默认模板示例（含风格、术语说明、输出格式）；提供变量插槽替换所选语言、语气、目标受众。
- **译文展示**：左右分栏或折叠式卡片；悬浮显示术语说明，支持标注修改（可选“微调译文”模式）。
- **评估维度**：语义准确度、流畅度、语气&品牌一致性、术语/格式遵循、可读性评分；输出评分（1-5）+文字建议+潜在风险。
- **术语库管理**：内置市场营销/信息技术双领域的中文→日语、中文→英文术语库，支持一键导入；与自定义术语表叠加并保留快照，便于历史追踪。
- **历史记录**：结构化存储 `{id, timestamp, source, targetLanguage, prompt, model, translation, evaluation, userNotes}`；支持星标收藏、重跑翻译。
- **权限与账号**：基础版无需登录只保留本地缓存；注册用户同步到云端（可选扩展）。

## 技术实现要点
- 前端：React/Vue + Tailwind/Chakra；状态管理（Redux/Pinia）；Monaco 编辑器用于 Prompt 调节；分段比对可利用 diff 算法。
- 后端：Node/Express 或 NestJS；提供 `/translate`、`/evaluate`、`/history` REST 接口；JWT 鉴权；按用户配额管理调用次数。
- DeepSeek 调用：封装 SDK；请求参数 `model`、`messages` 或 `prompt`、`temperature` 等；加入重试/延迟处理；记录 token 消耗。
- 数据存储：Postgres 或 Mongo 存储历史记录；Redis 缓存通用 Prompt 模板；S3/OSS 存储上传术语表。
- 审计与监控：记录请求日志、响应时间、错误码；配置告警阈值（API 失败率、超时）。

## 评估 Prompt 示例
```
你是资深翻译评审专家。综合原文和译文，从准确度、流畅度、语气一致性、术语与格式4个维度进行评分（1-5，保留一位小数），指出问题位置并给出改进建议。总结是否需要人工复核，输出JSON结构：
{
  "scores": {...},
  "issues": [...],
  "overall_comment": "",
  "recommendation": "accept | revise | human_review"
}
```

## 历史记录界面提示
- 列表：显示原文前50字符、目标语言、评分、创建时间；支持快速复制译文、导出。
- 详情：展示原/译文、使用 Prompt、模型参数、评估结果；允许添加用户备注。

## 可扩展方向
- 支持批量上传文件翻译、术语库版本管理与协作审批、多人协作与权限、集成 QA 工作流（自动生成修订建议）。

## 面向正式交付的加固事项
- **安全与配额**：对外 API 调用需启用速率限制、请求验证与 API Key 管理。
- **可观测性**：引入结构化日志（翻译、评估、错误），支持本地与生产环境落盘；记录提示词、耗时、模型配置信息。
- **历史数据导出**：支持将筛选后的历史记录导出为 JSON/CSV，方便团队归档。
- **设置管理**：允许用户保存默认配置（语言、模型、Prompt 模板），下次登录自动加载。
- **系统健康检查**：提供 `/api/health` 包含 DeepSeek API 可用性、自身服务状态。
